# Change Log

All notable changes to this project will be documented in this file.
See [Conventional Commits](https://conventionalcommits.org) for commit guidelines.

# [5.2.0](https://github.axa.com/Digital/bauta-nodejs/compare/v5.1.3...v5.2.0) (2021-10-04)


### Features

* **core:** add two new decorators ([#265](https://github.axa.com/Digital/bauta-nodejs/issues/265)) ([792fdbb](https://github.axa.com/Digital/bauta-nodejs/commit/792fdbb44448320200de7c91d9e7c2600363ee12)), closes [#266](https://github.axa.com/Digital/bauta-nodejs/issues/266) [#267](https://github.axa.com/Digital/bauta-nodejs/issues/267)





## [5.1.3](https://github.axa.com/Digital/bauta-nodejs/compare/v5.1.2...v5.1.3) (2021-09-07)


### Bug Fixes

* update dependencies and deprecate ([#264](https://github.axa.com/Digital/bauta-nodejs/issues/264)) ([f4164c6](https://github.axa.com/Digital/bauta-nodejs/commit/f4164c607fccb12ca62605247698bdc9613c8bec))





## [5.1.2](https://github.axa.com/Digital/bauta-nodejs/compare/v5.1.1...v5.1.2) (2021-08-30)

**Note:** Version bump only for package @bautajs/datasource-rest





## [5.1.1](https://github.axa.com/Digital/bauta-nodejs/compare/v5.1.0...v5.1.1) (2021-08-11)


### Bug Fixes

* **datasource-rest:** duplicated port log ([#260](https://github.axa.com/Digital/bauta-nodejs/issues/260)) ([4657c03](https://github.axa.com/Digital/bauta-nodejs/commit/4657c03934b2d8b4487b8a2e139688e48b77614a)), closes [#259](https://github.axa.com/Digital/bauta-nodejs/issues/259)





# [5.1.0](https://github.axa.com/Digital/bauta-nodejs/compare/v5.0.1...v5.1.0) (2021-08-09)


### Features

* **datasource-rest:** allow override logger hook ([#258](https://github.axa.com/Digital/bauta-nodejs/issues/258)) ([e5b3296](https://github.axa.com/Digital/bauta-nodejs/commit/e5b329695df1f217963a87613134319b57c03d3c))





# [5.0.0](https://github.axa.com/Digital/bauta-nodejs/compare/v4.1.0...v5.0.0) (2021-07-23)


### Features

* **core:** rename operator to decorator ([34739f2](https://github.axa.com/Digital/bauta-nodejs/commit/34739f22066182f959fde0dcbc737a29dc8aed30))





# [4.1.0](https://github.axa.com/Digital/bauta-nodejs/compare/v4.0.3...v4.1.0) (2021-07-09)

**Note:** Version bump only for package @bautajs/datasource-rest





## [4.0.3](https://github.axa.com/Digital/bauta-nodejs/compare/v4.0.2...v4.0.3) (2021-06-11)

**Note:** Version bump only for package @bautajs/datasource-rest





## [4.0.2](https://github.axa.com/Digital/bauta-nodejs/compare/v4.0.1...v4.0.2) (2021-06-02)

**Note:** Version bump only for package @bautajs/datasource-rest





## [4.0.1](https://github.axa.com/Digital/bauta-nodejs/compare/v4.0.0...v4.0.1) (2021-05-26)


### Bug Fixes

* run must be async ([#231](https://github.axa.com/Digital/bauta-nodejs/issues/231)) ([63338c1](https://github.axa.com/Digital/bauta-nodejs/commit/63338c12873f63fa02ed67e489be3b21a0d358a9))





# [4.0.0](https://github.axa.com/Digital/bauta-nodejs/compare/v3.4.1...v4.0.0) (2021-05-21)


### Features

* **@bautajs/rest-datasource:** improve logs ([#230](http://github.axa.com/Digital/bauta-nodejs/issues/230)) ([16567b0](http://github.axa.com/Digital/bauta-nodejs/commit/16567b02a40facf23d65359c839148aea26bb777))
* **@bautajs/rest-datasource:** move to got 11 ([#204](http://github.axa.com/Digital/bauta-nodejs/issues/204)) ([1ae7147](http://github.axa.com/Digital/bauta-nodejs/commit/1ae7147042900c5841584ea9745018dcb0eaf950)), closes [#201](http://github.axa.com/Digital/bauta-nodejs/issues/201)
* **@bautajs/rest-datasource:** expose hooks in the datasource ([#209](http://github.axa.com/Digital/bauta-nodejs/issues/209)) ([5dbeecf](http://github.axa.com/Digital/bauta-nodejs/commit/5dbeecf33b697a37fcbd40170b1df6979bf4988e)), closes [#207](http://github.axa.com/Digital/bauta-nodejs/issues/207) [#207](http://github.axa.com/Digital/bauta-nodejs/issues/207)
* add remote containers ([#202](http://github.axa.com/Digital/bauta-nodejs/issues/202)) ([a37c1ab](http://github.axa.com/Digital/bauta-nodejs/commit/a37c1abed2fe5c496525d54a40069c987e585dfc)), closes [#42](http://github.axa.com/Digital/bauta-nodejs/issues/42)


### BREAKING CHANGES

* **@bautajs/rest-datasource:** move truncateLogSize and disableTruncateLog to @bautajs/datasource
* **@bautajs/rest-datasource:** logs has been refactored
* **@bautajs/rest-datasource:** move from got 10.x to got 11.x





## [3.4.1](https://github.axa.com/Digital/bauta-nodejs/compare/v3.4.0...v3.4.1) (2020-09-17)

**Note:** Version bump only for package @bautajs/datasource-rest





# [3.4.0](https://github.axa.com/Digital/bauta-nodejs/compare/v3.3.0...v3.4.0) (2020-09-16)

**Note:** Version bump only for package @bautajs/datasource-rest





# [3.3.0](https://github.axa.com/Digital/bauta-nodejs/compare/v3.2.1...v3.3.0) (2020-07-22)


### Features

* **bautajs-core,bautajs-rest-datasource:** manage truncation on logs ([1483796](https://github.axa.com/Digital/bauta-nodejs/commit/14837964bcc677b75a29955448952c4d9594d1b1)), closes [#186](https://github.axa.com/Digital/bauta-nodejs/issues/186)





# [3.2.0](https://github.axa.com/Digital/bauta-nodejs/compare/v3.1.3...v3.2.0) (2020-05-22)


### Features

* **@bautajs/datasource-rest:** extend the provider ([#175](https://github.axa.com/Digital/bauta-nodejs/issues/175)) ([8a82778](https://github.axa.com/Digital/bauta-nodejs/commit/8a82778387f61189ef6bc8b9c114c6ec75f4c146)), closes [#167](https://github.axa.com/Digital/bauta-nodejs/issues/167)





## [3.1.3](https://github.axa.com/Digital/bauta-nodejs/compare/v3.1.2...v3.1.3) (2020-04-28)

**Note:** Version bump only for package @bautajs/datasource-rest





## [3.1.2](http://github.axa.com/Digital/bauta-nodejs/compare/v3.1.1...v3.1.2) (2020-04-22)

##### Bug Fixes

* **@bautajs/rest-datasource:**  log query params (#168) (39452f0c)

## [3.1.1](https://github.axa.com/Digital/bauta-nodejs/compare/v3.1.0...v3.1.1) (2020-04-20)

**Note:** Version bump only for package @bautajs/datasource-rest





# [3.1.0](https://github.axa.com/Digital/bauta-nodejs/compare/v3.0.1...v3.1.0) (2020-04-20)


### Bug Fixes

* pino 6 logs are not concatenated ([#163](https://github.axa.com/Digital/bauta-nodejs/issues/163)) ([d6c7a80](https://github.axa.com/Digital/bauta-nodejs/commit/d6c7a80))


### Features

* set default request header to x-request-id ([#164](https://github.axa.com/Digital/bauta-nodejs/issues/164)) ([8268f9c](https://github.axa.com/Digital/bauta-nodejs/commit/8268f9c))





## [3.0.1](https://github.axa.com/Digital/bauta-nodejs/compare/v3.0.0...v3.0.1) (2020-04-17)

**Note:** Version bump only for package @bautajs/datasource-rest






## [3.0.0](http://github.axa.com/Digital/bauta-nodejs/compare/v3.0.0...v2.3.0) (2020-04-16)

### Bug Fixes

* **@bautajs/datasource-rest:**
  *  handle http error (a9ace6bb)
  *  allow to override the agent (2ffbae3f)

### BREAKING CHANGES

* **bautajs-datasource-rest:**  remove template and datasource methods (6b2ba414)
* **@bautajs/datasource-rest:**
  *  log the request Id on the datasource log (#137) (18837a55)
  *  Simplify datasource (#135) (051f9355)
* **@bautajs/datasource-rest:**  logger (#142) (acee5cc6)
*  Change the validator architecture (#125) (319fb856)
*  change validator from open-api module to directly AJV (0be35150)

## [2.2.2](https://github.axa.com/Digital/bauta-nodejs/compare/v2.2.1...v2.2.2) (2019-10-29)

**Note:** Version bump only for package @bautajs/datasource-rest





## [2.2.1](https://github.axa.com/Digital/bauta-nodejs/compare/v2.2.0...v2.2.1) (2019-10-29)


### Bug Fixes

* operation run do not always returned a promise ([#119](https://github.axa.com/Digital/bauta-nodejs/issues/119)) ([bc5b755](https://github.axa.com/Digital/bauta-nodejs/commit/bc5b7553b7253075751d6fbdc94e4cf90b45a2d4)), closes [#118](https://github.axa.com/Digital/bauta-nodejs/issues/118) [#117](https://github.axa.com/Digital/bauta-nodejs/issues/117)





# [2.2.0](https://github.axa.com/Digital/bauta-nodejs/compare/v2.1.5...v2.2.0) (2019-09-17)


### Bug Fixes

* **@bautajs/datasource-rest:** add more options for template ([98afc32](https://github.axa.com/Digital/bauta-nodejs/commit/98afc32))
* **@bautajs/datasource-rest:** fix datasource options typescript definition ([5db7eb3](https://github.axa.com/Digital/bauta-nodejs/commit/5db7eb3)), closes [#100](https://github.axa.com/Digital/bauta-nodejs/issues/100)





## [2.1.5](https://github.axa.com/Digital/bauta-nodejs/compare/v2.1.4...v2.1.5) (2019-09-04)

**Note:** Version bump only for package @bautajs/datasource-rest





## [2.1.4](https://github.axa.com/Digital/bauta-nodejs/compare/v2.1.3...v2.1.4) (2019-08-22)

**Note:** Version bump only for package @bautajs/datasource-rest





## [2.1.3](https://github.axa.com/Digital/bauta-nodejs/compare/v2.1.2...v2.1.3) (2019-08-22)

**Note:** Version bump only for package @bautajs/datasource-rest





## [2.1.2](https://github.axa.com/Digital/bauta-nodejs/compare/v2.1.1...v2.1.2) (2019-08-21)

**Note:** Version bump only for package @bautajs/datasource-rest





## [2.1.1](https://github.axa.com/Digital/bauta-nodejs/compare/v2.1.0...v2.1.1) (2019-08-21)


### Bug Fixes

* **@bautajs/datasource-rest:** retProvider options type must be madatory and can not be a generic type ([ec28089](https://github.axa.com/Digital/bauta-nodejs/commit/ec28089))





# [2.1.0](https://github.axa.com/Digital/bauta-nodejs/compare/v2.0.1...v2.1.0) (2019-08-21)


### Bug Fixes

* **@bautajs/datasource-rest:** add deepmerge module ([#91](https://github.axa.com/Digital/bauta-nodejs/issues/91)) ([5c4dd22](https://github.axa.com/Digital/bauta-nodejs/commit/5c4dd22))


### Features

* **@bautajs/core:**  pipelines are now runnable. ([#89](https://github.axa.com/Digital/bauta-nodejs/issues/89)) ([78f21d8](https://github.axa.com/Digital/bauta-nodejs/commit/78f21d8)), closes [#86](https://github.axa.com/Digital/bauta-nodejs/issues/86) [#93](https://github.axa.com/Digital/bauta-nodejs/issues/93)
* **@bautajs/datasource-rest:** id is not longer mandatory when use restProvider ([d7d59a6](https://github.axa.com/Digital/bauta-nodejs/commit/d7d59a6)), closes [#94](https://github.axa.com/Digital/bauta-nodejs/issues/94)





## [2.0.1](https://github.axa.com/Digital/bauta-nodejs/compare/v2.0.0...v2.0.1) (2019-07-24)


### Bug Fixes

* **@bautajs/datasource-rest:** restProviderTemplate.compile wasn't working. Step fn has 4 parameters not 3 ([45f72e2](https://github.axa.com/Digital/bauta-nodejs/commit/45f72e2))





# [2.0.0](https://github.axa.com/Digital/bauta-nodejs/compare/v2.0.0-alpha.10...v2.0.0) (2019-07-24)


### Bug Fixes

* allow foreverAgent and extend the agent ([018080e](https://github.axa.com/Digital/bauta-nodejs/commit/018080e))


### Features

* BautaJS refactor concept ([#83](https://github.axa.com/Digital/bauta-nodejs/issues/83)) ([a138074](https://github.axa.com/Digital/bauta-nodejs/commit/a138074)), closes [#82](https://github.axa.com/Digital/bauta-nodejs/issues/82) [#74](https://github.axa.com/Digital/bauta-nodejs/issues/74) [#72](https://github.axa.com/Digital/bauta-nodejs/issues/72) [#78](https://github.axa.com/Digital/bauta-nodejs/issues/78)


### BREAKING CHANGES

* datasources has been removed from the bautajs core. Use it as separated feature (decorator).
* service concept has been removed from the core. Operations are now built from the OpenAPI schema.
* All packages has been moved under @bautajs scope.
* Not core decorators has been moved to another package. @bautajs/datasource-rest, @bautajs/decorator-cache, @bautajs/decorator-template, @bautajs/decorator-filter
* ctx.dataSource do not exist any more, use providers from @bautajs/datasource-rest
* datasource structure has change, services and operations where removed, now use providers instead.
* Operation methods has been modified, some of them has been removed, see ./types for more info
* setup method destroy old version pipeline
* operation versioning has changed, see ./docs/api-versioning.md
* to add certificates and agent options to a datasource you have to create a new agent.
* error handler has been moved to pipeline level as onError

* Features:
* not posible to update agent options, instead create a new agent for it.

- update dependencies to fix audit





# [2.0.0-alpha.10](https://github.axa.com/Digital/bauta-nodejs/compare/v2.0.0-alpha.9...v2.0.0-alpha.10) (2019-07-10)


### Features

* datasource as plugins ([2e86ae8](https://github.axa.com/Digital/bauta-nodejs/commit/2e86ae8)), closes [#75](https://github.axa.com/Digital/bauta-nodejs/issues/75) [#72](https://github.axa.com/Digital/bauta-nodejs/issues/72)


### BREAKING CHANGES

* @bautajs/core it does not have got anymore
* @bautajs/core datasources have been modified to allow pluggable datasource system
* rename decorators packages @bautajs/decorator-cache, @bautajs/decorator-template, @bautajs/decorator-filter
* remove @bautajs/decorators package
* move native-proxy-agent to amf-commons-nodejs
* move multipart-request-builder to amf-commons-nodejs
* compileDataSource include the compiled dataSource as a fn parameter after ctx instead of replace the ctx.dataSource
* ctx.dataSource has been renamed to ctx.dataSourceBuilder





# [2.0.0-alpha.9](https://github.axa.com/Digital/bauta-nodejs/compare/v2.0.0-alpha.8...v2.0.0-alpha.9) (2019-06-28)

**Note:** Version bump only for package @bautajs/cache-decorator





# [2.0.0-alpha.8](https://github.axa.com/Digital/bauta-nodejs/compare/v2.0.0-alpha.7...v2.0.0-alpha.8) (2019-06-11)


### Bug Fixes

* **bautajs, bautajs-express:** operations where exposed twice ([4b0afc8](https://github.axa.com/Digital/bauta-nodejs/commit/4b0afc8)), closes [#69](https://github.axa.com/Digital/bauta-nodejs/issues/69)


### BREAKING CHANGES

* **bautajs, bautajs-express:** dataSourceCtx parameter has becomed dataSourceStatic and can be accessed by `$static.` word inside the dataSources

- Improve express update route algorithm





# [2.0.0-alpha.7](https://github.axa.com/Digital/bauta-nodejs/compare/v2.0.0-alpha.6...v2.0.0-alpha.7) (2019-06-06)


### Bug Fixes

* **bautajs, bautajs/express:** No more crash on create documentation. Get ride of the not used schema definitions. ([1f2bf7f](https://github.axa.com/Digital/bauta-nodejs/commit/1f2bf7f)), closes [#68](https://github.axa.com/Digital/bauta-nodejs/issues/68) [#67](https://github.axa.com/Digital/bauta-nodejs/issues/67)





# [2.0.0-alpha.6](https://github.axa.com/Digital/bauta-nodejs/compare/v2.0.0-alpha.5...v2.0.0-alpha.6) (2019-06-05)

**Note:** Version bump only for package @bautajs/cache-decorator





# [2.0.0-alpha.5](https://github.axa.com/Digital/bauta-nodejs/compare/v2.0.0-alpha.4...v2.0.0-alpha.5) (2019-06-04)

**Note:** Version bump only for package @bautajs/cache-decorator





# [2.0.0-alpha.4](https://github.axa.com/Digital/bauta-nodejs/compare/v2.0.0-alpha.3...v2.0.0-alpha.4) (2019-06-04)

**Note:** Version bump only for package @bautajs/cache-decorator





# [2.0.0-alpha.3](https://github.axa.com/Digital/bauta-nodejs/compare/v2.0.0-alpha.2...v2.0.0-alpha.3) (2019-06-03)

**Note:** Version bump only for package @bautajs/cache-decorator





# [2.0.0-alpha.2](https://github.axa.com/Digital/bauta-nodejs/compare/v2.0.0-alpha.1...v2.0.0-alpha.2) (2019-06-03)

**Note:** Version bump only for package @bautajs/cache-decorator





# [2.0.0-alpha.1](https://github.axa.com/Digital/bauta-nodejs/compare/v2.0.0-alpha.0...v2.0.0-alpha.1) (2019-06-03)

**Note:** Version bump only for package @bautajs/cache-decorator





# [2.0.0-alpha.0](https://github.axa.com/Digital/bauta-nodejs/compare/v1.2.2...v2.0.0-alpha.0) (2019-06-03)


### Features

* move to typescript [#49](https://github.axa.com/Digital/bauta-nodejs/issues/49) ([#65](https://github.axa.com/Digital/bauta-nodejs/issues/65)) ([2fa2676](https://github.axa.com/Digital/bauta-nodejs/commit/2fa2676)), closes [#59](https://github.axa.com/Digital/bauta-nodejs/issues/59) [#62](https://github.axa.com/Digital/bauta-nodejs/issues/62)


### BREAKING CHANGES

* dataSource compilation parameters had change, now no ctx has to be passed
* dataSource url can not be changed on dataSource.request() function, request() only allow Got options.
* .push method now only accepts a function with the given signature (value, ctx) => any
* loopbackFilter dataSource option has been moved to a standalone package @bautajs/filters-decorator
* service.myService.version.operation.push has been moved to operation.setup(pipeline => pipeline.push()) to allow better code intellisense
* Step class has been removed
* service.myService.version.push has been removed
* service.myService.version.operation.exec has been replaced for operation.run
* context.req and context.res are now mandatory parameters on run the operation pipeline
* dataSource.request() now returns an object with asBody(), asStream(), asResponse()
* dataSource resolveBodyOnly has been deleted from dataSource now use only on the request, dataSource.request({ resolveBodyOnly:false })
* dataSource stream options has been removed, now use use only on the request, dataSource.request({ stream:true })
* decorators has been moved from 'bautajs/decorators/..' to an standalone package '@bautajs/decorators'
* context.req and context.res are now mandatory parameters on run the operation pipeline





## [1.2.2](https://github.axa.com/Digital/bauta-nodejs/compare/v1.2.1...v1.2.2) (2019-05-08)


### Features

* **batuajs,bautajs-express:** add  strict definition filter for explorer ([#64](https://github.axa.com/Digital/bauta-nodejs/issues/64)) ([02d9a4b](https://github.axa.com/Digital/bauta-nodejs/commit/02d9a4b)), closes [#63](https://github.axa.com/Digital/bauta-nodejs/issues/63)





## [1.2.1](https://github.axa.com/Digital/bauta-nodejs/compare/v1.2.0...v1.2.1) (2019-04-11)

**Note:** Version bump only for package bautajs-cache-decorator





# [1.2.0](https://github.axa.com/Digital/bauta-nodejs/compare/v1.1.5...v1.2.0) (2019-04-11)


### Features

* **bautajs-cache-decorator:** add a cache decorator ([#56](https://github.axa.com/Digital/bauta-nodejs/issues/56)) ([692a46b](https://github.axa.com/Digital/bauta-nodejs/commit/692a46b)), closes [#54](https://github.axa.com/Digital/bauta-nodejs/issues/54) [#55](https://github.axa.com/Digital/bauta-nodejs/issues/55)
