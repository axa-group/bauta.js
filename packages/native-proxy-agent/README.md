<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [native-proxy-agent][1]
-   [How to install][2]
-   [Usage][3]
-   [Usage with strict ssl and certificates][4]
-   [createAgent][5]
    -   [Parameters][6]
-   [HttpAgent][7]
    -   [Parameters][8]
-   [HttpsAgent][9]
    -   [Parameters][10]

## native-proxy-agent

Build a NodeJS agent with proxy support taking profite of the native [NodeJS http/s Agent][11] features.
Comes by default with:

-   Keep Alive.
-   http_proxy, https_proxy environment variables support.
-   All Nodejs Agent features.


## How to install

Make sure that you have access to [Artifactory][12]

```console
  npm install native-proxy-agent
```


## Usage

```js
  const got = require('got');
  const createAgent = require('native-proxy-agent');
  
  const target = 'http://someUrl.com/somePost';
  const httpAgent = createAgent(target)
  
  await got('http://someUrl.com/someGet', {
    method: 'GET',
    agent: httpAgent
  })
```

Since we didn't specify a proxy, the library will look for the proxy env variables and do the request.


## Usage with strict ssl and certificates

```js
  const fs = require('fs');
  const got = require('got');
  const createAgent = require('native-proxy-agent');

  const cert = fs.readFileSync('mycert.pem');
  const key = fs.readFileSync('mykey.key');
  const target = 'http://someUrl.com/somePost';
  const httpAgent = createAgent(target, { cert, key, rejectUnauthorized: true })
  
  await got('http://someUrl.com/someGet', {
    method: 'GET',
    agent: httpAgent
  })
```


## createAgent

Get the needed proxy agent depending of the given proxy options and target.
Also try to gets the proxy from the http/s_proxy env variables

### Parameters

-   `target` **[string][13]** The target to proxy
-   `options` **[Object][14]?** options to pass to the native http/s.Agent (optional, default `{}`)
    -   `options.proxy` **[Object][14]?** overrides the proxy from the http/s_proxy env variables
        -   `options.proxy.host` **[Object][14]?** proxy host
        -   `options.proxy.port` **[Object][14]?** proxy port
        -   `options.proxy.protocol` **[Object][14]?** proxy protocol, http, https...

Returns **([HttpsAgent][15] \| [HttpAgent][16])** The agent depending on the target.

## HttpAgent

**Extends http.Agent**

A http agent implementation with proxy

### Parameters

-   `options` **[Object][14]** options to pass to the native http/s.Agent
    -   `options.proxy` **[Object][14]?** overrides the proxy from the http/s_proxy env variables
        -   `options.proxy.host` **[Object][14]?** proxy host
        -   `options.proxy.port` **[Object][14]?** proxy port
        -   `options.proxy.protocol` **[Object][14]?** proxy protocol, http, https...

## HttpsAgent

**Extends https.Agent**

A https agent implementation with proxy

### Parameters

-   `options` **[Object][14]** options to pass to the native http/s.Agent
    -   `options.proxy` **[Object][14]?** overrides the proxy from the http/s_proxy env variables
        -   `options.proxy.host` **[Object][14]?** proxy host
        -   `options.proxy.port` **[Object][14]?** proxy port
        -   `options.proxy.protocol` **[Object][14]?** proxy protocol, http, https...

[1]: #native-proxy-agent

[2]: #how-to-install

[3]: #usage

[4]: #usage-with-strict-ssl-and-certificates

[5]: #createagent

[6]: #parameters

[7]: #httpagent

[8]: #parameters-1

[9]: #httpsagent

[10]: #parameters-2

[11]: https://nodejs.org/api/http.html#http_new_agent_options

[12]: https://axags.jfrog.io/axags/api/npm/virtual-bcn-node/

[13]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[14]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[15]: #httpsagent

[16]: #httpagent
