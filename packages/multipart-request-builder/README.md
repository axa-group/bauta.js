<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [multipart-request-builder][1]
-   [How to install][2]
-   [Usage][3]
-   [Multipart][4]
    -   [Parameters][5]
    -   [Examples][6]
    -   [buildRequest][7]
        -   [Parameters][8]
        -   [Examples][9]

## multipart-request-builder

Use it to build a multipart/related requests ready to inject to a nodejs request


## How to install

Make sure that you have access to [Artifactory][10]

```console
  npm install multipart-request-builder
```


## Usage

```js
  const got = require('got');
  const Multipart = require('multipart-request-buildier');
  const options = {
    preambleCRLF: true,
    postambleCRLF true
  }
  
  const multipartInstance = new Multipart(options);
  const reqOptions = {
    "chunked": false,
    "data": [
       { body: 'I am an attachment' },
       { body: fs.createReadStream(path.resolve(__dirname, '../someFile.json')) }
     ]
    }
  const multipartRequest = multipartInstance.buildRequest(reqOptions);

  await got('http://someUrl.com/somePost', {
    method: 'POST',
    body: multipartRequest.body,
    headers: { ...multipartRequest.headers, Accept: 'application/json' },
    json: false
  })
```

This produces a request to the `somePost` service with the given files and json.


## Multipart

A multipart builder for any request library. It's based on request/request lib.

### Parameters

-   `options` **[Object][11]?** Optional configuration
    -   `options.preambleCRLF` **[boolean][12]?** Add the pre CRLF character '\\r\\n'
    -   `options.postambleCRLF` **[boolean][12]?** Add the post CRLF character '\\r\\n'

### Examples

```javascript
const Multipart = require('multipart-request-buildier');
const options = {
 preambleCRLF: true,
 postambleCRLF true
}

const multipartInstance = new Multipart(options);
const reqOptions = {
   "chunked": false,
   "data": [
     { body: 'I am an attachment' },
     { body: fs.createReadStream(path.resolve(__dirname, '../fixtures/test-schema.json')) }
   ]
  }
const multipartRequest = multipartInstance.buildRequest(reqOptions);
// {
//   "body":"\r\nsommultipartbody\r\n"
//   "headers": {
//     "transfer-encoding":"chunked"
//   }
// }
```

Returns **[Multipart][13]** 

### buildRequest

Allows build the multipart request

#### Parameters

-   `options` **([Object][11] \| [Array][14]&lt;[string][15]> | [Array][14]&lt;[object][11]> | [Array][14]&lt;[Stream][16]>)** The multipart options, could be an array of string, nodejs stream and objects, or an object to attached.
    -   `options.data` **([Array][14]&lt;[string][15]> | [Array][14]&lt;[object][11]> | [Array][14]&lt;[Stream][16]>)?** Use it only if you have to change the value of chunked to true
    -   `options.chunked` **[Object][11]?** wherever or not you need to split the data in chunks. If some operation.data is equals to a node Stream, chunked will be automatically true.

#### Examples

```javascript
const multipartRequest = multipartInstance.buildRequest(reqOptions);
// {
//   "body":"\r\nsommultipartbody\r\n"
//   "headers": {
//     "transfer-encoding":"chunked"
//   }
// }
```

Returns **{headers: [Object][11], body: [Object][11]}** the headers and body ready for the request

[1]: #multipart-request-builder

[2]: #how-to-install

[3]: #usage

[4]: #multipart

[5]: #parameters

[6]: #examples

[7]: #buildrequest

[8]: #parameters-1

[9]: #examples-1

[10]: https://axags.jfrog.io/axags/api/npm/virtual-bcn-node/

[11]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[12]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[13]: #multipart

[14]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[15]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[16]: https://nodejs.org/api/stream.html
